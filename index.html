<!doctype html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="/logo192.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="TOKONEMBAHMO - Toko Makanan Ringan Online Terpercaya" />
    <meta name="theme-color" content="#D4AF37" />
    <title>TOKONEMBAHMO - Toko Makanan Ringan</title>

    <!-- SPA redirect for GitHub Pages -->
    <script type="text/javascript">
      (function(l) {
        if (l.search[1] === '/' ) {
          var decoded = l.search.slice(1).split('&').map(function(s) { 
            return s.replace(/~and~/g, '&')
          }).join('?');
          window.history.replaceState(null, null,
              l.pathname.slice(0, -1) + decoded + l.hash
          );
        }
      }(window.location))
    </script>
  </head>
  <body>
    <!-- In-app browser overlay (hidden by default, shown via JS) -->
    <div id="inapp-overlay" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.95);z-index:99999;align-items:center;justify-content:center;padding:20px;font-family:system-ui,-apple-system,sans-serif;">
      <div style="background:linear-gradient(to bottom,#042f2e,#022c22);border:1px solid rgba(212,175,55,0.4);border-radius:16px;max-width:380px;width:100%;padding:28px 24px;text-align:center;">
        
        <!-- Icon -->
        <div style="width:56px;height:56px;background:rgba(212,175,55,0.15);border-radius:14px;display:flex;align-items:center;justify-content:center;margin:0 auto 16px;">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#D4AF37" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
        </div>

        <!-- Title -->
        <h2 style="color:#fff;font-size:18px;font-weight:700;margin:0 0 6px;">Buka di Chrome</h2>
        <p style="color:#9ca3af;font-size:13px;line-height:1.5;margin:0 0 16px;">
          Website ini lebih baik dibuka di <b style="color:#D4AF37;">Chrome</b> atau browser HP Anda.
        </p>

        <!-- Link display box -->
        <div id="link-box" style="background:rgba(0,0,0,0.3);border:1px solid rgba(212,175,55,0.3);border-radius:10px;padding:12px 14px;margin-bottom:14px;display:flex;align-items:center;gap:8px;">
          <span style="color:#D4AF37;font-size:13px;flex:1;text-align:left;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;" id="link-text"></span>
          <span id="copy-icon" style="color:#9ca3af;font-size:16px;cursor:pointer;">ðŸ“‹</span>
        </div>

        <!-- Salin Link button (primary) -->
        <button id="copy-btn" style="width:100%;padding:14px;background:#D4AF37;color:#000;font-weight:700;font-size:15px;border:none;border-radius:10px;cursor:pointer;margin-bottom:6px;">
          ðŸ“‹ Salin Link
        </button>
        <p id="copy-feedback" style="display:none;color:#4ade80;font-size:13px;font-weight:600;margin:6px 0 0;">âœ… Link tersalin!</p>

        <!-- Steps (shown after copy) -->
        <div id="after-copy-steps" style="display:none;background:rgba(255,255,255,0.05);border-radius:12px;padding:14px;text-align:left;margin-top:14px;">
          <p style="color:#fff;font-size:13px;font-weight:600;margin:0 0 10px;">Langkah selanjutnya:</p>
          <div style="display:flex;align-items:flex-start;gap:10px;margin-bottom:10px;">
            <div style="min-width:24px;height:24px;background:#D4AF37;color:#000;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:12px;">1</div>
            <p style="color:#d1d5db;font-size:13px;margin:0;line-height:1.5;">Buka aplikasi <b style="color:#fff;">Chrome</b> di HP Anda</p>
          </div>
          <div style="display:flex;align-items:flex-start;gap:10px;">
            <div style="min-width:24px;height:24px;background:#D4AF37;color:#000;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:12px;">2</div>
            <p style="color:#d1d5db;font-size:13px;margin:0;line-height:1.5;"><b style="color:#fff;">Tahan</b> di address bar atas, lalu pilih <b style="color:#fff;">Paste & Go / Tempel</b></p>
          </div>
        </div>

        <!-- Skip -->
        <button id="skip-btn" style="width:100%;padding:10px;background:transparent;color:#6b7280;font-size:13px;border:none;cursor:pointer;margin-top:12px;">
          Lanjut di sini saja â†’
        </button>
      </div>
    </div>

    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>

    <!-- In-app browser detection -->
    <script>
      (function() {
        var ua = navigator.userAgent || navigator.vendor || window.opera || '';
        
        var inAppPatterns = [
          'FBAN', 'FBAV', 'FB_IAB', 'FBIOS', 'FBSS',
          'Instagram',
          'TikTok', 'BytedanceWebview', 'musical_ly',
          'ByteLocale', 'aweme',
          'Line/', 'Snapchat',
          'Twitter', 'TwitterAndroid',
          'MicroMessenger', 'KAKAOTALK',
          'Telegram', 'Pinterest',
        ];
        
        var isInApp = false;
        for (var i = 0; i < inAppPatterns.length; i++) {
          if (ua.indexOf(inAppPatterns[i]) > -1) {
            isInApp = true;
            break;
          }
        }
        if (!isInApp && /; wv\)/i.test(ua)) {
          isInApp = true;
        }

        if (isInApp) {
          var overlay = document.getElementById('inapp-overlay');
          var url = window.location.href;
          
          if (overlay) {
            overlay.style.display = 'flex';
            
            // Show link in the box
            var linkText = document.getElementById('link-text');
            if (linkText) linkText.textContent = url;

            function doCopy() {
              if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(url).then(onCopied).catch(fallbackCopy);
              } else {
                fallbackCopy();
              }
            }

            function fallbackCopy() {
              var ta = document.createElement('textarea');
              ta.value = url;
              ta.style.cssText = 'position:fixed;left:-9999px;top:0;';
              document.body.appendChild(ta);
              ta.focus();
              ta.select();
              try { document.execCommand('copy'); onCopied(); } catch(e) {}
              document.body.removeChild(ta);
            }

            function onCopied() {
              var btn = document.getElementById('copy-btn');
              var feedback = document.getElementById('copy-feedback');
              var steps = document.getElementById('after-copy-steps');
              var copyIcon = document.getElementById('copy-icon');
              
              if (btn) {
                btn.textContent = 'âœ… Tersalin!';
                btn.style.background = '#22c55e';
              }
              if (feedback) feedback.style.display = 'block';
              if (steps) steps.style.display = 'block';
              if (copyIcon) copyIcon.textContent = 'âœ…';
            }

            // Copy button
            var copyBtn = document.getElementById('copy-btn');
            if (copyBtn) copyBtn.addEventListener('click', doCopy);
            
            // Also copy when clicking the icon
            var copyIcon = document.getElementById('copy-icon');
            if (copyIcon) copyIcon.addEventListener('click', doCopy);

            // Skip button
            var skipBtn = document.getElementById('skip-btn');
            if (skipBtn) {
              skipBtn.addEventListener('click', function() {
                overlay.style.display = 'none';
              });
            }
          }
        }
      })();
    </script>
  </body>
</html>
